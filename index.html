<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Daily Priority Calculator</title>

<style>
body{
  margin:0;
  font-family:system-ui,Arial;
  background:#0f172a;
  color:#fff;
  display:flex;
  justify-content:center;
}
.app{
  width:100%;
  max-width:420px;
  min-height:100vh;
  padding:18px;
}
.page{display:none}
.page.active{display:block}

header{
  text-align:center;
  font-size:22px;
  font-weight:600;
  margin-bottom:8px;
}

.topbar{
  display:flex;
  justify-content:space-between;
  align-items:center;
  margin-bottom:8px;
}

.langBtn{
  font-size:13px;
  padding:6px 12px;
  border-radius:14px;
  background:#1e293b;
  border:none;
  color:#fff;
  cursor:pointer;
}

.card{
  background:#1e293b;
  border-radius:16px;
  padding:16px;
  margin-bottom:14px;
}

input,select{
  width:100%;
  padding:12px;
  margin-top:8px;
  border-radius:10px;
  border:none;
  font-size:16px;
}

.task{margin-bottom:14px}

button{
  width:100%;
  padding:14px;
  font-size:17px;
  border:none;
  border-radius:28px;
  background:linear-gradient(45deg,#38bdf8,#4ade80);
  color:#020617;
  margin-top:18px;
  cursor:pointer;
}

.spinBox{
  text-align:center;
  font-size:22px;
  margin-top:40px;
  animation:spin 1.4s infinite linear;
}
@keyframes spin{
  from{transform:rotate(0deg)}
  to{transform:rotate(360deg)}
}

.resultTask{
  font-size:18px;
  padding:10px;
  border-bottom:1px solid rgba(255,255,255,.2);
}
.fade{opacity:.4}

.small{
  font-size:14px;
  opacity:.7;
  text-align:center;
  margin-top:10px;
}

.toggle{
  display:flex;
  justify-content:space-between;
  align-items:center;
  font-size:15px;
  margin-bottom:10px;
}

.streak{
  text-align:center;
  font-size:14px;
  opacity:.8;
  margin-bottom:10px;
}
</style>
</head>

<body>
<div class="app">

<!-- PAGE 1 -->
<div class="page active" id="page1">

<div class="topbar">
  <div id="title">üìÖ Daily Priority Calculator</div>
  <button class="langBtn" onclick="toggleLang()">HI / EN</button>
</div>

<div class="streak" id="streakBox"></div>

<div class="card toggle">
  <span id="studentLabel">üéì Student Mode</span>
  <input type="checkbox" id="studentMode">
</div>

<div id="tasks"></div>

<button onclick="goSpin()" id="calcBtn">Calculate Today</button>
<div class="small" id="limitText">One calculation per day</div>
</div>

<!-- PAGE 2 -->
<div class="page" id="page2">
<header id="calcTitle">üé° Calculating‚Ä¶</header>
<div class="spinBox">‚è≥</div>
</div>

<!-- PAGE 3 -->
<div class="page" id="page3">
<header id="resultTitle">‚úÖ Today‚Äôs Focus</header>

<div class="card">
  <strong id="doToday">DO TODAY</strong>
  <div id="doList"></div>
</div>

<div class="card fade">
  <strong id="holdLater">HOLD FOR LATER</strong>
  <div id="holdList"></div>
</div>

<button onclick="finishDay()" id="doneBtn">Done</button>
</div>

</div>

<script>
/* ---------- LANGUAGE ---------- */
let lang = localStorage.getItem("lang") || "en";

const TEXT={
  en:{
    title:"üìÖ Daily Priority Calculator",
    student:"üéì Student Mode",
    calc:"Calculate Today",
    limit:"One calculation per day",
    calcTitle:"üé° Calculating‚Ä¶",
    result:"‚úÖ Today‚Äôs Focus",
    do:"DO TODAY",
    hold:"HOLD FOR LATER",
    done:"Done",
    streak:"üèÜ Streak"
  },
  hi:{
    title:"üìÖ ‡§¶‡•à‡§®‡§ø‡§ï ‡§™‡•ç‡§∞‡§æ‡§•‡§Æ‡§ø‡§ï‡§§‡§æ ‡§ï‡•à‡§≤‡§ï‡•Å‡§≤‡•á‡§ü‡§∞",
    student:"üéì ‡§õ‡§æ‡§§‡•ç‡§∞ ‡§Æ‡•ã‡§°",
    calc:"‡§Ü‡§ú ‡§ó‡§£‡§®‡§æ ‡§ï‡§∞‡•á‡§Ç",
    limit:"‡§¶‡§ø‡§® ‡§Æ‡•á‡§Ç ‡§ï‡•á‡§µ‡§≤ ‡§è‡§ï ‡§¨‡§æ‡§∞",
    calcTitle:"üé° ‡§ó‡§£‡§®‡§æ ‡§π‡•ã ‡§∞‡§π‡•Ä ‡§π‡•à‚Ä¶",
    result:"‚úÖ ‡§Ü‡§ú ‡§ï‡§æ ‡§´‡•ã‡§ï‡§∏",
    do:"‡§Ü‡§ú ‡§ï‡§∞‡•á‡§Ç",
    hold:"‡§¨‡§æ‡§¶ ‡§Æ‡•á‡§Ç ‡§ï‡§∞‡•á‡§Ç",
    done:"‡§∏‡§Æ‡§æ‡§™‡•ç‡§§",
    streak:"üèÜ ‡§≤‡§ó‡§æ‡§§‡§æ‡§∞ ‡§¶‡§ø‡§®"
  }
};

function applyLang(){
  const t=TEXT[lang];
  title.innerText=t.title;
  studentLabel.innerText=t.student;
  calcBtn.innerText=t.calc;
  limitText.innerText=t.limit;
  calcTitle.innerText=t.calcTitle;
  resultTitle.innerText=t.result;
  doToday.innerText=t.do;
  holdLater.innerText=t.hold;
  doneBtn.innerText=t.done;

  if(streak>0){
    streakBox.innerText=`${t.streak}: ${streak}`;
  }
}

function toggleLang(){
  lang = lang==="en"?"hi":"en";
  localStorage.setItem("lang",lang);
  applyLang();
}

/* ---------- DATE + STREAK ---------- */
const today=new Date();
const todayKey=today.toDateString();
const yesterdayKey=new Date(today-86400000).toDateString();

let streak=parseInt(localStorage.getItem("streak")||"0");
const lastDay=localStorage.getItem("lastDay");

if(lastDay===yesterdayKey){
}else if(lastDay!==todayKey){
  streak=0;
}

if(streak>0){
  streakBox.innerText=`${TEXT[lang].streak}: ${streak}`;
}

/* ---------- DAILY LOCK ---------- */
if(localStorage.getItem("usedDay")===todayKey){
  document.body.innerHTML=
  "<div style='padding:40px;text-align:center;font-size:18px;color:white'>üîí Today already calculated<br><br>Come back tomorrow.</div>";
}

/* ---------- TASK INPUT ---------- */
for(let i=1;i<=5;i++){
  tasks.innerHTML+=`
  <div class="task">
    <input placeholder="Task ${i}">
    <select>
      <option value="1">Low Effort</option>
      <option value="1.5">Medium Effort</option>
      <option value="2">High Effort</option>
    </select>
    <input type="number" placeholder="Minutes" min="1">
  </div>`;
}

/* ---------- CALC ---------- */
function goSpin(){
  const rows=[...document.querySelectorAll(".task")];
  const student=studentMode.checked;
  let list=[];

  rows.forEach(r=>{
    const name=r.children[0].value.trim();
    const effort=parseFloat(r.children[1].value);
    const time=parseInt(r.children[2].value);

    if(name && time){
      let score=time*effort;
      if(student){
        const study=["study","read","exam","revision","homework","class","notes","‡§™‡§¢‡§º"];
        const low=name.toLowerCase();
        score*=study.some(w=>low.includes(w))?1.15:0.95;
      }
      score+=score*(Math.random()*0.2);
      list.push({name,score});
    }
  });

  if(list.length<2){alert("Enter at least 2 tasks");return;}

  localStorage.setItem("tasks",JSON.stringify(list));
  localStorage.setItem("usedDay",todayKey);

  page1.classList.remove("active");
  page2.classList.add("active");
  setTimeout(showResult,2200);
}

function showResult(){
  const list=JSON.parse(localStorage.getItem("tasks"));
  list.sort((a,b)=>b.score-a.score);
  doList.innerHTML="";holdList.innerHTML="";
  list.forEach((t,i)=>{
    const d=document.createElement("div");
    d.className="resultTask";
    d.innerText=t.name;
    (i<2?doList:holdList).appendChild(d);
  });
  page2.classList.remove("active");
  page3.classList.add("active");
}

function finishDay(){
  streak = lastDay===yesterdayKey ? streak+1 : 1;
  localStorage.setItem("streak",streak);
  localStorage.setItem("lastDay",todayKey);
  location.reload();
}

applyLang();
</script>

</body>
</html>
