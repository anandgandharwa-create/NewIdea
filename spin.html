<!DOCTYPE html>
<html lang="hi">
<head>
  <meta charset="UTF-8">
  <title>‡§Ö‡§®‡•Å‡§≠‡•Ç‡§§‡§ø ‡§ö‡§ï‡•ç‡§∞</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <style>
    body {
      background: #020617;
      color: white;
      text-align: center;
      font-family: sans-serif;
      padding-top: 40px;
    }

    h2 {
      font-weight: normal;
      line-height: 1.5;
      margin-bottom: 20px;
    }

    .wheel {
      width: 250px;
      height: 250px;
      border-radius: 50%;
      margin: 40px auto;
      background: conic-gradient(
        red 0deg 60deg,
        orange 60deg 120deg,
        yellow 120deg 180deg,
        green 180deg 240deg,
        cyan 240deg 300deg,
        violet 300deg 360deg
      );
      transition: transform 3.4s cubic-bezier(0.17, 0.67, 0.12, 0.99);
      box-shadow:
        0 0 25px rgba(255,255,255,0.18),
        0 0 60px rgba(255,255,255,0.10);
    }

    .wheel.active {
      box-shadow:
        0 0 35px rgba(255,255,255,0.30),
        0 0 90px rgba(255,255,255,0.18);
    }

    button {
      padding: 15px 30px;
      font-size: 18px;
      background: #22c55e;
      border: none;
      border-radius: 10px;
      cursor: pointer;
      color: #020617;
    }
  </style>
</head>

<body>

<h2>
  ‡§Ö‡§¨ ‡§∏‡•ã‡§ö‡§ø‡§è ‡§Æ‡§§‚Ä¶<br>
  ‡§ï‡•á‡§µ‡§≤ ‡§Ö‡§®‡•Å‡§≠‡§µ ‡§ï‡•Ä‡§ú‡§ø‡§è
</h2>

<div id="wheel" class="wheel"></div>

<button onclick="spin()">SPIN</button>

<script>
const wheel = document.getElementById("wheel");

/* üé® Colour zones (0‚Äì360) */
const zones = [
  { color: "red",    name: "reaction",  from: 0,   to: 60  },
  { color: "orange", name: "control",   from: 60,  to: 120 },
  { color: "yellow", name: "awareness", from: 120, to: 180 },
  { color: "green",  name: "witness",   from: 180, to: 240 },
  { color: "cyan",   name: "peace",     from: 240, to: 300 },
  { color: "violet", name: "silence",   from: 300, to: 360 }
];

function getScorePercent() {
  const answers = JSON.parse(localStorage.getItem("zqf_answers")) || [];
  if (!answers.length) return 50;
  const total = answers.reduce((a,b)=>a+b,0);
  return Math.round((total/(answers.length*3))*100);
}

function spin() {
  wheel.classList.add("active");

  const percent = getScorePercent();
  let base = 1080;
  let offset;

  if (percent <= 33) offset = Math.random() * 360;
  else if (percent <= 66) offset = 120 + Math.random() * 120;
  else offset = 180 + Math.random() * 60;

  const finalRotation = base + offset;
  wheel.style.transform = `rotate(${finalRotation}deg)`;

  // üîç Find colour
  const finalDeg = finalRotation % 360;
  const hit = zones.find(z => finalDeg >= z.from && finalDeg < z.to);

  // save for advice page
  localStorage.setItem("spin_result", hit.name);

  setTimeout(() => {
    wheel.classList.remove("active");
    window.location.href = "advice.html";
  }, 3500);
}
</script>

</body>
</html>
