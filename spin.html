<!DOCTYPE html>
<html lang="hi">
<head>
  <meta charset="UTF-8">
  <title>‡§Ö‡§®‡•Å‡§≠‡•Ç‡§§‡§ø ‡§ö‡§ï‡•ç‡§∞</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <style>
    body {
      background: #020617;
      color: white;
      text-align: center;
      font-family: sans-serif;
      padding-top: 40px;
    }

    h2 {
      font-weight: normal;
      line-height: 1.5;
      margin-bottom: 20px;
    }

    .wheel {
      width: 250px;
      height: 250px;
      border-radius: 50%;
      margin: 40px auto;
      background: conic-gradient(
        red, orange, yellow, green, cyan, blue, violet, red
      );
      transition: transform 3.2s cubic-bezier(0.17, 0.67, 0.12, 0.99);
      box-shadow:
        0 0 25px rgba(255,255,255,0.18),
        0 0 60px rgba(255,255,255,0.10);
    }

    .wheel.active {
      box-shadow:
        0 0 35px rgba(255,255,255,0.30),
        0 0 90px rgba(255,255,255,0.18);
    }

    button {
      padding: 15px 30px;
      font-size: 18px;
      background: #22c55e;
      border: none;
      border-radius: 10px;
      cursor: pointer;
      color: #020617;
    }
  </style>
</head>

<body>

<h2>
  ‡§Ö‡§¨ ‡§∏‡•ã‡§ö‡§ø‡§è ‡§Æ‡§§‚Ä¶<br>
  ‡§ï‡•á‡§µ‡§≤ ‡§Ö‡§®‡•Å‡§≠‡§µ ‡§ï‡•Ä‡§ú‡§ø‡§è
</h2>

<div id="wheel" class="wheel"></div>

<button onclick="spin()">SPIN</button>

<script>
/* üåø SPIN LINKED WITH METER SCORE */

const wheel = document.getElementById("wheel");

// meter ke answers se % nikalo
function getScorePercent() {
  const answers = JSON.parse(localStorage.getItem("zqf_answers")) || [];
  if (!answers.length) return 50; // default

  const total = answers.reduce((a, b) => a + b, 0);
  return Math.round((total / (answers.length * 3)) * 100);
}

function spin() {
  wheel.classList.add("active");

  const percent = getScorePercent();

  /*
    LOGIC:
    low score  ‚Üí zyada randomness
    high score ‚Üí centred / balanced stop
  */

  let baseRotation = 1080; // 3 rounds minimum
  let randomOffset;

  if (percent <= 33) {
    // üî¥ low awareness ‚Üí chaotic
    randomOffset = Math.random() * 360;
  } else if (percent <= 66) {
    // üü° medium ‚Üí semi-balanced
    randomOffset = 120 + Math.random() * 120;
  } else {
    // üü¢ high ‚Üí centred & calm
    randomOffset = 170 + Math.random() * 20;
  }

  const finalRotation = baseRotation + randomOffset;

  wheel.style.transform = `rotate(${finalRotation}deg)`;

  setTimeout(() => {
    wheel.classList.remove("active");
    window.location.href = "advice.html";
  }, 3400);
}
</script>

</body>
</html>
