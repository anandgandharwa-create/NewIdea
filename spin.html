<!DOCTYPE html>
<html lang="hi">
<head>
  <meta charset="UTF-8">
  <title>‡§Ö‡§®‡•Å‡§≠‡•Ç‡§§‡§ø ‡§ö‡§ï‡•ç‡§∞</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <style>
    body {
      background: #020617;
      color: #e5e7eb;
      text-align: center;
      font-family: sans-serif;
      padding-top: 30px;
    }

    .lang {
      margin-bottom: 15px;
    }
    .lang button {
      margin: 0 6px;
      padding: 6px 12px;
      border-radius: 8px;
      border: none;
      cursor: pointer;
      background: #1e293b;
      color: #e5e7eb;
    }

    h2 {
      font-weight: normal;
      line-height: 1.5;
      margin-bottom: 20px;
    }

    .wheel {
      width: 250px;
      height: 250px;
      border-radius: 50%;
      margin: 30px auto;
      background: conic-gradient(
        red 0deg 60deg,
        orange 60deg 120deg,
        yellow 120deg 180deg,
        green 180deg 240deg,
        cyan 240deg 300deg,
        violet 300deg 360deg
      );
      transition: transform 3.4s cubic-bezier(0.17, 0.67, 0.12, 0.99);
      box-shadow:
        0 0 25px rgba(255,255,255,0.18),
        0 0 60px rgba(255,255,255,0.10);
      display: block;
      visibility: visible;
    }

    .wheel.active {
      box-shadow:
        0 0 35px rgba(255,255,255,0.30),
        0 0 90px rgba(255,255,255,0.18);
    }

    button.spin-btn {
      padding: 15px 30px;
      font-size: 18px;
      background: #22c55e;
      border: none;
      border-radius: 10px;
      cursor: pointer;
      color: #020617;
    }
  </style>
</head>

<body>

<!-- üåê LANGUAGE TOGGLE -->
<div class="lang">
  <button onclick="setSpinLang('hi')">‡§π‡§ø‡§®‡•ç‡§¶‡•Ä</button>
  <button onclick="setSpinLang('en')">English</button>
</div>

<!-- üßò TEXT -->
<h2 data-key="spinText">
  ‡§Ö‡§¨ ‡§∏‡•ã‡§ö‡§ø‡§è ‡§Æ‡§§‚Ä¶<br>
  ‡§ï‡•á‡§µ‡§≤ ‡§Ö‡§®‡•Å‡§≠‡§µ ‡§ï‡•Ä‡§ú‡§ø‡§è
</h2>

<!-- üé° WHEEL -->
<div id="wheel" class="wheel"></div>

<button class="spin-btn" onclick="spin()" data-key="spinBtn">SPIN</button>

<script>
/* üåê LANGUAGE TEXT */
const spinText = {
  hi: {
    spinText: "‡§Ö‡§¨ ‡§∏‡•ã‡§ö‡§ø‡§è ‡§Æ‡§§‚Ä¶<br>‡§ï‡•á‡§µ‡§≤ ‡§Ö‡§®‡•Å‡§≠‡§µ ‡§ï‡•Ä‡§ú‡§ø‡§è",
    spinBtn: "‡§ò‡•Å‡§Æ‡§æ‡§è‡§Å"
  },
  en: {
    spinText: "Don‚Äôt think now‚Ä¶<br>Just experience",
    spinBtn: "SPIN"
  }
};

function setSpinLang(lang) {
  localStorage.setItem("lang", lang);
  document.documentElement.lang = lang;

  document.querySelectorAll("[data-key]").forEach(el => {
    el.innerHTML = spinText[lang][el.dataset.key];
  });
}

setSpinLang(localStorage.getItem("lang") || "hi");

/* üé® SPIN ZONES */
const zones = [
  { name: "reaction", from: 0,   to: 60  },
  { name: "control",  from: 60,  to: 120 },
  { name: "awareness",from: 120, to: 180 },
  { name: "witness",  from: 180, to: 240 },
  { name: "peace",    from: 240, to: 300 },
  { name: "silence",  from: 300, to: 360 }
];

const wheel = document.getElementById("wheel");

function getScorePercent() {
  const answers = JSON.parse(localStorage.getItem("zqf_answers")) || [];
  if (!answers.length) return 50;
  const total = answers.reduce((a,b)=>a+b,0);
  return Math.round((total/(answers.length*3))*100);
}

function spin() {
  wheel.classList.add("active");

  const percent = getScorePercent();
  let base = 1080;
  let offset;

  if (percent <= 33) offset = Math.random() * 360;
  else if (percent <= 66) offset = 120 + Math.random() * 120;
  else offset = 180 + Math.random() * 60;

  const finalRotation = base + offset;
  wheel.style.transform = `rotate(${finalRotation}deg)`;

  const finalDeg = finalRotation % 360;
  const hit = zones.find(z => finalDeg >= z.from && finalDeg < z.to);

  // üîë SAVE RESULT FOR ADVICE PAGE
  localStorage.setItem("spin_result", hit.name);

  setTimeout(() => {
    wheel.classList.remove("active");
    window.location.href = "advice.html";
  }, 3500);
}
</script>

</body>
</html>
